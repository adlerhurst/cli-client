var (
	_{{.VarName}}Request = &{{.Request}}Flag{ {{.Request}}: new({{.Request}})}
    {{.VarName}} = &{{ ident "github.com/spf13/cobra" "Command" | qualify }}{
		Use:                "{{.Use}}",
		Short:              `{{.Short}}`,
		Long:               `{{.Long}}`,
        Run:                run{{.VarName}},
		FParseErrWhitelist: {{ ident "github.com/spf13/cobra" "FParseErrWhitelist" | qualify }}{UnknownFlags: true},
		DisableFlagParsing: true,
	}
)

func init() {
	{{.Parent.VarName}}.AddCommand({{.VarName}})
	{{.VarName}}.PreRun = func(cmd *{{ ident "github.com/spf13/cobra" "Command" | qualify }}, args []string) {
		{{.VarName}}.Flags().Parse(args)
		_{{.VarName}}Request.AddFlags({{.VarName}}.Flags())
		if {{.VarName}}.Flag("help").Changed {
			{{.VarName}}.Help()
			{{ ident "os" "Exit" | qualify }}(0)
		}
		_{{.VarName}}Request.ParseFlags(cmd.Flags(), args)
	}
}

func run{{.VarName}}(cmd *{{ ident "github.com/spf13/cobra" "Command" | qualify }}, args []string){
	cmd.Flags().VisitAll(func(f *{{ ident "github.com/spf13/pflag" "Flag" | qualify }}) {
		if !f.Changed {
			return 
		}
		{{ logger }}.Info("flag", "name", f.Name, "value", f.Value.String(), "changed", f.Changed)
	})
}
